$(document).ready(function(e){function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function n(){var e=a();if(-1!==e){var t=e+14,n=g.indexOf("?");return-1===n?g.substring(t):g.substring(t,n)}return""}function a(){return g.indexOf("/search/label/")}function r(){var e=n();return""!==e&&(e="/-/"+e),"/feeds/posts/summary"+e+"?alt=json-in-script&max-results=99999"}function s(){var e="";if(-1!==g.indexOf("?q=")||-1!==g.indexOf("&q=")){var t=-1!==g.indexOf("?q=")?g.substring(g.indexOf("?q=")):g.substring(g.indexOf("&q="));e=-1!==t.indexOf("&")?t.substring(3,t.indexOf("&")):t.substring(3)}return e}function i(e,t){var n=1,a=u();return""!==a&&(n=l(t,a)),n}function l(e,t){for(var n=1,a=0;a<e.feed.entry.length;a++){var r=o(e.feed.entry[a].published.$t);if(t===r){n=d(a+2);break}}return n}function o(e){return e.substring(0,19)+e.substring(23,29)}function u(){var e="",t=g.indexOf("/search?updated-max="),a="/search/label/"+n()+"?updated-max=",r=g.indexOf(a);return(-1!==t||-1!==r)&&(e=f(-1!==t?t+20:r+a.length)),decodeURIComponent(e)}function f(e){var t=g.substring(e,g.length);return-1!==t.indexOf("&")?t.substring(0,t.indexOf("&")):t}function d(e){return Math.ceil(e/O.postPerPage)}function c(e){var t=d(e.feed.entry.length),a=[],r=1;if(1>=t)a.push("/?max-results="+O.postPerPage);else{var s=-1!==g.indexOf("/search/label/");r=i(t,e),s?a.push("/search/label/"+n()+"?max-results="+O.postPerPage):a.push("/?max-results="+O.postPerPage),p(a,t,e,s)}h(a,t,r)}function p(e,t,a,r){for(var s=r?"/search/label/"+n()+"?updated-max=":"/search?updated-max=",i=2;t>=i;++i){var l=(i-1)*O.postPerPage-1;e.push(s+encodeURIComponent(o(a.feed.entry[l].published.$t))+"&max-results="+O.postPerPage)}}function h(e,t,n){var a='<span class="pages">Trang '+n+"/"+t+"</span>",r=Math.floor((O.numOfPages-1)/2),s=O.numOfPages-1-r,i=n-r;0>=i&&(i=1);var l=n+s;l-i<O.numOfPages&&(l=i+O.numOfPages-1),l>t&&(l=t,i=t-O.numOfPages+1),0>=i&&(i=1),i>1&&(a+='<a href="'+e[0]+'">'+O.firstText+"</a>"),n>1&&(a+='<a href="'+e[n-2]+'">'+O.prevText+"</a>");for(var o=i;l>=o;++o)a+=o===n?'<span class="current">'+o+"</span>":'<a href="'+e[o-1]+'">'+o+"</a>";t>n&&(a+='<a href="'+e[n]+'">'+O.nextText+"</a>"),t>l&&(a+='<a href="'+e[t-1]+'">'+O.lastText+"</a>"),$("#pagination").html(a)}function v(e){var t="";t+="<ul>";for(var n=0;m>n;n++){var a=e.feed.entry[n],r=a.title.$t;if("content"in a)var s=a.content.$t;else if("summary"in a)var s=a.summary.$t;else var s="";if(s=s.replace(/<[^>]*>/g,""),s.length<x)var i=s;else{s=s.substring(0,x);var l=s.lastIndexOf(" ");i=s.substring(0,l)+"&#133;"}for(var o=0;o<a.link.length;o++){if("thr$total"in a)var u=a.thr$total.$t+" "+y;else u=Math.floor(2e3*Math.random()+1);if("alternate"==a.link[o].rel){var f=a.link[o].href,d=a.published.$t;if("media$thumbnail"in a)var c=a.media$thumbnail.url;else c="http://lh3.ggpht.com/--Z8SVBQZ4X8/TdDxPVMl_sI/AAAAAAAAAAA/jhAgjCpZtRQ/no-image.png"}}t+="<li>",t+='<img alt="'+r+'" src="'+c+'"/>',t+='<div><a href="'+f+'" title="'+i+'">'+r+"</a></div>","yes"==b&&(t+="<span>"+d.substring(8,10)+"/"+d.substring(5,7)+"/"+d.substring(0,4)+" - "+u+" "+y+"</span>"),t+='<div style="clear:both"></div></li>'}t+="</ul>",$("#recent-posts").html(t)}var g=location.href,m=5,x=150,b="yes",y="Bình luận",O={homepageUrl:"http://www.loichucvn.com",postPerPage:t("max-results")||9,numOfPages:5,firstText:"Đầu tiên",lastText:"Cuối cùng",nextText:"»",prevText:"«"};!function(e,t,n){e.fn.tinyNav=function(a){var r=e.extend({active:"selected",header:"",indent:"- ",label:""},a);return this.each(function(){n++;var a=e(this),s="tinynav"+n,i=".l_"+s,l=e("<select/>").attr("id",s).addClass("tinynav "+s);if(a.is("ul,ol")){""!==r.header&&l.append(e("<option/>").text(r.header));var o="";a.addClass("l_"+s).find("a").each(function(){o+='<option value="'+e(this).attr("href")+'">';var t;for(t=0;t<e(this).parents("ul, ol").length-1;t++)o+=r.indent;o+=e(this).text()+"</option>"}),l.append(o),r.header||l.find(":eq(0)").attr("selected","selected"),l.change(function(){t.location.href=e(this).val()}),e(i).after(l),r.label&&l.before(e("<label/>").attr("for",s).addClass("tinynav_label "+s+"_label").append(r.label))}})}}(jQuery,this,0);var P=function(){var e="";e=-1===g.indexOf("?q=")&&-1===g.indexOf("&q=")?r():"/feeds/posts/summary?alt=json-in-script&max-results=99999&q="+encodeURIComponent(s()),$.ajax({type:"GET",url:O.homepageUrl+e,contentType:"application/json",dataType:"jsonp",success:function(e){c(e)}})},T=function(){$.ajax({type:"GET",url:O.homepageUrl+"/feeds/posts/default?alt=json-in-script&max-results="+m,contentType:"application/json",dataType:"jsonp",success:function(e){v(e)}})};$(document).ready(function(){$(window).scroll(function(){var e=$(window).scrollTop();100>e?$("#backtotop").addClass("hidden").removeClass("display"):$("#backtotop").addClass("display").removeClass("hidden")})}),T(),P(),$("#main-menu").tinyNav()});