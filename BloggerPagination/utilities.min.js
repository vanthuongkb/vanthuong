$(document).ready(function(e){function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var t=new RegExp("[\\?&]"+e+"=([^&#]*)"),n=t.exec(location.search);return null==n?"":decodeURIComponent(n[1].replace(/\+/g," "))}function n(){var e=a();if(-1!==e){var t=e+14,n=v.indexOf("?");return-1===n?v.substring(t):v.substring(t,n)}return""}function a(){return v.indexOf("/search/label/")}function r(){var e=n();return""!==e&&(e="/-/"+e),"/feeds/posts/summary"+e+"?alt=json-in-script&max-results=99999"}function s(){var e="";if(-1!==v.indexOf("?q=")||-1!==v.indexOf("&q=")){var t=-1!==v.indexOf("?q=")?v.substring(v.indexOf("?q=")):v.substring(v.indexOf("&q="));e=-1!==t.indexOf("&")?t.substring(3,t.indexOf("&")):t.substring(3)}return e}function i(e,t){var n=1,a=u();return""!==a&&(n=l(t,a)),n}function l(e,t){for(var n=1,a=0;a<e.feed.entry.length;a++){var r=o(e.feed.entry[a].published.$t);if(t===r){n=d(a+1*y.postPerPage);break}}return n}function o(e){return e.substring(0,19)+e.substring(23,29)}function u(){var e="",t=v.indexOf("/search?updated-max="),a="/search/label/"+n()+"?updated-max=",r=v.indexOf(a);return(-1!==t||-1!==r)&&(e=f(-1!==t?t+20:r+a.length)),decodeURIComponent(e)}function f(e){var t=v.substring(e,v.length);return-1!==t.indexOf("&")?t.substring(0,t.indexOf("&")):t}function d(e){return Math.ceil(e/y.postPerPage)}function c(e){if("entry"in e.feed){var t=d(e.feed.entry.length),a=[],r=1;if(1>=t)a.push("/?max-results="+y.postPerPage);else{var s=-1!==v.indexOf("/search/label/");r=i(t,e),s?a.push("/search/label/"+n()+"?max-results="+y.postPerPage):a.push("/?max-results="+y.postPerPage),p(a,t,e,s)}h(a,t,r)}}function p(e,t,a,r){for(var s=r?"/search/label/"+n()+"?updated-max=":"/search?updated-max=",i=2;t>=i;++i){var l=(i-1)*y.postPerPage-1;e.push(s+encodeURIComponent(o(a.feed.entry[l].published.$t))+"&max-results="+y.postPerPage)}}function h(e,t,n){var a='<span class="pages">Trang '+n+"/"+t+"</span>",r=Math.floor((y.numOfPages-1)/2),s=y.numOfPages-1-r,i=n-r;0>=i&&(i=1);var l=n+s;l-i<y.numOfPages&&(l=i+y.numOfPages-1),l>t&&(l=t,i=t-y.numOfPages+1),0>=i&&(i=1),i>1&&(a+='<a href="'+e[0]+'" class="first-text">'+y.firstText+"</a>"),n>1&&(a+='<a href="'+e[n-2]+'" class="prev-text">'+y.prevText+"</a>");for(var o=i;l>=o;++o)a+=o===n?'<span class="current">'+o+"</span>":'<a href="'+e[o-1]+'">'+o+"</a>";t>n&&(a+='<a href="'+e[n]+'" class="next-text">'+y.nextText+"</a>"),t>l&&(a+='<a href="'+e[t-1]+'" class="last-text">'+y.lastText+"</a>"),$("#pagination").html(a)}function g(e){var t="";t+="<ul>";for(var n=0;m>n;n++){var a=e.feed.entry[n],r=a.title.$t,s="";"content"in a?s=a.content.$t:"summary"in a&&(s=a.summary.$t),s=s.replace(/<[^>]*>/g,"");var i="";if(s.length<x)i=s;else{s=s.substring(0,x);var l=s.lastIndexOf(" ");i=s.substring(0,l)+"&#133;"}for(var o=0,u="",f="",d="http://lh3.ggpht.com/--Z8SVBQZ4X8/TdDxPVMl_sI/AAAAAAAAAAA/jhAgjCpZtRQ/no-image.png",c=0;c<a.link.length;c++)if("thr$total"in a&&(o=a.thr$total.$t>0?a.thr$total.$t:Math.floor(100*Math.random()+1)),"alternate"==a.link[c].rel&&(u=a.link[c].href,f=a.published.$t,"media$thumbnail"in a))var d=a.media$thumbnail.url;t+="<li>",t+='<img alt="'+r+'" src="'+d+'"/>',t+='<div><a href="'+u+'" title="'+i+'">'+r+"</a></div>","yes"==rcp_info&&(t+="<span>"+f.substring(8,10)+"/"+f.substring(5,7)+"/"+f.substring(0,4)+" - "+o+" "+b+"</span>"),t+='<div style="clear:both"></div></li>'}t+="</ul>",$("#recent-posts").html(t)}var v=location.href,m=5,x=150,b="Bình luận",y={homepageUrl:websiteUrl,postPerPage:t("max-results")||7,numOfPages:5,firstText:"Đầu tiên",lastText:"Cuối cùng",nextText:"»",prevText:"«"};!function(e,t,n){e.fn.tinyNav=function(a){var r=e.extend({active:"selected",header:"",indent:"- ",label:""},a);return this.each(function(){n++;var a=e(this),s="tinynav"+n,i=".l_"+s,l=e("<select/>").attr("id",s).addClass("tinynav "+s);if(a.is("ul,ol")){""!==r.header&&l.append(e("<option/>").text(r.header));var o="";a.addClass("l_"+s).find("a").each(function(){o+='<option value="'+e(this).attr("href")+'">';var t;for(t=0;t<e(this).parents("ul, ol").length-1;t++)o+=r.indent;o+=e(this).text()+"</option>"}),l.append(o),r.header||l.find(":eq(0)").attr("selected","selected"),l.change(function(){t.location.href=e(this).val()}),e(i).after(l),r.label&&l.before(e("<label/>").attr("for",s).addClass("tinynav_label "+s+"_label").append(r.label))}})}}(jQuery,this,0);var O=function(){var e="";e=-1===v.indexOf("?q=")&&-1===v.indexOf("&q=")?r():"/feeds/posts/summary?alt=json-in-script&max-results=99999&q="+encodeURIComponent(s()),$.ajax({type:"GET",url:y.homepageUrl+e,contentType:"application/json",dataType:"jsonp",success:function(e){c(e)}})},P=function(){$.ajax({type:"GET",url:y.homepageUrl+"/feeds/posts/default?alt=json-in-script&max-results="+m,contentType:"application/json",dataType:"jsonp",success:function(e){g(e)}})};$(document).ready(function(){$(window).scroll(function(){var e=$(window).scrollTop();100>e?$("#backtotop").addClass("hidden").removeClass("display"):$("#backtotop").addClass("display").removeClass("hidden")})});var T=function(){var e=new Date,t=e.getYear();1e3>t&&(t+=1900);var n=e.getDay(),a=e.getMonth(),r=e.getDate();10>r&&(r="0"+r);var s=new Array("Chủ nhật","Thứ hai","Thứ ba","Thứ tư","Thứ năm","Thứ sáu","Thứ bảy"),i=new Array("01","02","03","04","05","06","07","08","09","10","11","12"),l="<p>Hôm nay là: "+s[n]+", "+r+"/"+i[a]+"/"+t+"</p>";$("#top-navbar .time").html(l)};P(),O(),T(),$("#main-menu").tinyNav()});